# Інструкція з доступу до ArgoCD
![Демонстрація: розгортання k3d та залежностей; деплоймент ArgoCD та доступ до WEB Console](../.data/poc.gif)
## Передумови

Перед початком роботи переконайтеся, що у вас встановлені:
- Docker або Podman
- k3d
- kubectl
- helm

## Встановлення залежностей

Ви можете використати команди з Makefile для встановлення всіх необхідних компонентів:

1. Перевірте наявність всіх компонентів:
```bash
make system-check
```

2. Встановіть всі необхідні компоненти:
```bash
make all
```

Або встановіть компоненти окремо:
```bash
make install-k3d     # Встановлення k3d
make install-kubectl # Встановлення kubectl
make install-helm    # Встановлення helm
```

## Встановлення ArgoCD

1. Клонуйте репозиторій:
```bash
git clone <repository-url>
cd <repository-name>
```

2. Запустіть встановлення:
```bash
make seed
```

Ця команда:
- Створить локальний k3d кластер
- Встановить ArgoCD
- Налаштує Ingress для доступу до веб-інтерфейсу

## Доступ до веб-інтерфейсу

### Через Ingress (рекомендований спосіб)

1. Після успішного встановлення, ви отримаєте URL для доступу до ArgoCD у форматі:
```
https://argocd.<ваша-ip>.nip.io
```

2. Відкрийте цей URL у вашому браузері

3. Введіть облікові дані:
   - Логін: `admin`
   - Пароль: (буде показаний після встановлення)

4. При першому вході браузер може попередити про небезпечний сертифікат. Це нормально, оскільки використовується самопідписаний сертифікат. Ви можете безпечно продовжити.

### Альтернативний спосіб через port-forwarding

Якщо доступ через Ingress не працює, ви можете використати port-forwarding:

1. Запустіть команду:
```bash
make seed-proxy
```

2. Відкрийте в браузері:
```
https://localhost:8080
```

3. Використовуйте ті самі облікові дані:
   - Логін: `admin`
   - Пароль: (буде показаний після встановлення)

## Видалення

Для видалення кластера та всіх компонентів виконайте:
```bash
make seed-destroy
```

Для повного видалення всіх компонентів (включаючи k3d, kubectl та helm):
```bash
make clear
```

## Вирішення проблем

### Проблеми з доступом через Ingress

1. Перевірте, чи працює Ingress Controller:
```bash
kubectl get pods -n ingress-nginx
```

2. Перевірте статус Ingress:
```bash
kubectl get ingress -n argocd
```

3. Перевірте логи Ingress Controller:
```bash
kubectl logs -n ingress-nginx -l app.kubernetes.io/component=controller
```

### Проблеми з сертифікатом

Якщо виникають проблеми з сертифікатом:
1. Переконайтеся, що ви використовуєте `https://`
2. Прийміть попередження про небезпечний сертифікат у браузері
3. Якщо проблема залишається, спробуйте використати port-forwarding

## Додаткова інформація

- [Офіційна документація ArgoCD](https://argo-cd.readthedocs.io/)
- [Документація k3d](https://k3d.io/)
- [Документація NGINX Ingress Controller](https://kubernetes.github.io/ingress-nginx/) 